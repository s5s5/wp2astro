---
id: 2748
title: "折腾VPS配置"
date: 2013-04-09T16:10:52.000Z
categories:
  - "first-category"
---

昨晚一不小心买了两台15刀/年128M的VPS，一台 [BuyVM](https://my.frantech.ca/aff.php?aff=719) (不定期有货)，一台 [BudgetVM](https://www.budgetvm.com/account/aff.php?aff=985)(比前一个差点，有货) 于是乎就又开始折腾起来了。折腾什么呢？折腾 BudgetVM 这台默认安装的 Ubuntu 因为不是 minimal 安装，所以内存使用过高的问题。BuyVM 直接就是安装的 Ubuntu(minimal) 版，内存使用那叫一个低啊，当然这都是指机器还没运行LNMP之类的服务的情况下。

BuyVM的内存情况，默认进程非常少，所以内存占用少 ![](/assets/uploads/2013/04/20130409134229.png) <!--more--> BudgetVM的内存情况，默认进程非常多，所以内存占用多 ![](/assets/uploads/2013/04/20130409134242.png)

所以就开始折腾看那些进程是可以干掉的，分析加搜索加勇气100%，以下服务个人认为可以干掉，当然还没长期实验，如果有人照我这个演练，出了问题概不负责 :(

停止apache2服务

```
/etc/init.d/apache2 stop
```

卸载apache2及相关

```
apt-get purge apache2 apache2.2-common apache2-mpm-prefork apache2-utils apache2.2-bin libapache2-mod-php5
```

```
apt-get autoremove
```

```
ls /etc/apache2
#如果列出的是/etc/apache2下面的子目录相关的文件请执行下面的命令
rm /etc/apache2 -rf
rm /etc/init.d/apache2
```

停止DNS服务，就是进程里的named

```
apt-get autoremove bind9
```

停止邮件服务，可见人们是多么喜欢发垃圾邮件啊 进程sendmail-mta

```
apt-get autoremove sendmail sendmail-bin postfix
apt-get purge postfix exim4 sendmail sendmail-bin
```

进程saslauthd

```
apt-get autoremove libsasl2 sasl2-bin
```

重起机器

```
reboot
```

再来看看，内存终于占用不多了，可以睡觉了…… ![](/assets/uploads/2013/04/20130409233753.png)

\--- 来自 2013年04月11日 的更新 ---

chkconfig 就可以停止不想要的服务

```
chkconfig sendmail off
```

tzselect 设置时区，当然有点不管用要，要用

```
\cp /usr/share/zoneinfo/Asia/Shanghai /etc/localtime
```
