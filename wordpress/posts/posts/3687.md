---
id: 3687
title: "网站上了CDN"
date: 2017-12-05T13:28:34.000Z
categories:
  - "first-category"
---

Dogfooding 我还做的不够好，把网站迁移到 [腾讯云](https://cloud.tencent.com) 后，竟然一直不知道可以免费用 10G 每月的 CDN ，昨天才用上，感觉如下

痛点：

- 真心有点难发现，CVM 控制台竟然一点指引也没有
- 为了上 CDN ，还要设置 云解析 就是 DNS ，这又是一个控制台
- 如果网站上了 HTTPS ，还要进 SSL 管理的控制台
- 这几个关系这么紧密，是不是可以互相打通？

坑点：

- 网站上 CDN 后，一定要开启 高级过期缓存配置
- 设置后台管理目录 /wp-admin 不 CACHE
- 还有什么 .php 什么的也不要 CACHE 了
- 最终还是只 CACHE 图片、样式、JS这些静态资源了，想全站 CACHE 导致很多功能失效了。
- 如果不这么设置，WP会更新失败，我找了半天原因，好像是什么 WAF ，反正设置好就OK了

最近还有用 [Cloudflare](https://www.cloudflare.com) ，在他这里做网站 DNS 解析，可以直接点一下就自动做 CDN，可惜国内他没有节点。

Cloudflare 基本是以域名为中心，然后通过 TAB 切换几大功能点。而还有以网站为中心的，比如宝塔面板，在网站管理这里，把网站常用功能做了整合，然后在左侧 TAB 进行切换。

[宝塔面板](https://www.bt.cn)感觉比 [AMH](https://amh.sh) 要漂亮易用，AMH 功能多但功能分离的，来回点来点去的，宝塔感觉要超越 AMH 了。 <!--more-->

- 界面上宝塔更漂亮
- 功能交互上比如网站这一块，宝塔比 AMH 点击路径要短，AMH 虽然可以建快捷方式，但用的人比较少吧，因为进面板操作也不是经常来看，会忘记建的快捷方式。
- 功能的组织上宝塔要更合理些，比如网站的 SSL 功能，AMH 到处来回要点多少下啊
- 版本发布宝塔基本一个月一个版本，让用户感觉到他们一直在改进，AMH 主要放在软件商店里了，这个对用户的感知有点弱，用户要感觉到你们的努力啊。
- 总体功能上感觉 AMH 要多和好，但我有些细节不到位，感觉不好用的点：SSL 功能不方便，AMH 连自动 LES 证书都没有。备份啊等网站常用功能可以和环境功能组合吧。环境功能感觉建好了就没人爱折腾改来改去吧。

大体就这些希望 AMH 早日改进，我可是付费用户啊！

另外：迁移网站后记得用 `chown -R -v root:mail test6` 改文件的拥有者啊！
