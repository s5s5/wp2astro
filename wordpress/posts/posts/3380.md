---
id: 3380
title: "网站开启SSL"
date: 2015-11-27T09:23:29.000Z
categories:
  - "first-category"
---

早就想给本站换上 HTTPS 的绿色安全图标，可一直把他想的太难，今天刚好看到 v2ex 上 [兽兽](https://ttt.tt/)（就是卖给老罗t.tt域名的家伙） 说 [SSL.DO](https://saki.ssl.do/aff.php?aff=23) 今天有优惠才3美金（网上还有免费的SSL，不折腾了……），所以果断的下手买了，然后就是安装了。

**第一步、生成CSR**

在自己网站上招待以下命令，注意替换相关域名

```
openssl req -new -newkey rsa:2048 -nodes -out example_com.csr -keyout example_com.key -subj "/C=CN/ST=Beijing/L=Beijing/O=Google Inc/OU=Network Dept/CN=example.com"
```

得到 CSR 和 Key 文件**小心将文件保存**。

**第二步、GET 完整的 SSL 证书**

使用 `cat` 命令查看 CSR 文件内容，内容提交至 [SSL.DO](https://saki.ssl.do/aff.php?aff=23) 后台相关地方。然后会通过你域名 WHOIS 中的邮箱来验证你的身份。来回几封邮箱搞定。**会给你一个邮件发来 完整的 SSL 证书**。

<!--more-->

**第三步、串联证书链**

依照 域名证书 -> 中间证书 -> 根证书 的顺序串联为证书链，才能被绝大多数浏览器信任。

```
cat example_com.crt COMODORSADomainValidationSecureServerCA.crt COMODORSAAddTrustCA.crt AddTrustExternalCARoot.crt > example_com.bundle.crt
```

**第四步、服务器设置 SSL**

嘿嘿嘿嘿，因为我用的 [AMH 面板](http://amh.sh/) 所以直接在 AMH 后台的 **模块扩展** 下载安装 **BBShijieSSL** （AMH面板主机ssl(https)连接模块，为虚拟主机增加SSL功能，开启https访问，支持同一主机多个SSL站点）。完成后**在相关地方粘贴 第一步的 key 和 第三步的 crt 文件内容**。

**第五步、Wordpress 启动 HTTPS**

安装 Really Simple SSL 插件，启用。

_好了，HTTPS 的绿色安全图标 GET！我的装逼事业又向前进了一步，YEAH！_

---

2016-05-03 更新：已经改用 [Let’s Encrypt](https://letsencrypt.org/) 证书，使用 [一个快速获取/更新 Let's encrypt 证书的 shell script](https://github.com/xdtianyu/scripts/blob/master/lets-encrypt/README-CN.md)。 2017-05-05 更新：使用 [Certbot](https://certbot.eff.org/) 自动更新 Let’s Encrypt 证书。
