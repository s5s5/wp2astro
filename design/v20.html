<!doctype html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>[米随随] s5s5 - Pixel Portal</title>
    <style>
      /* =========================================
       引入 JetBrains Mono, Fusion Pixel 字体
       ========================================= */
      /* jetbrains-mono-latin-wght-normal */
      @font-face {
        font-family: "JetBrains Mono Variable";
        font-style: normal;
        font-display: swap;
        font-weight: 400 800;
        src: url(https://cdn.jsdelivr.net/fontsource/fonts/jetbrains-mono:vf@latest/latin-wght-normal.woff2)
          format("woff2-variations");
        unicode-range:
          U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC,
          U+0304, U+0308, U+0329, U+2000-206F, U+20AC, U+2122, U+2191, U+2193,
          U+2212, U+2215, U+FEFF, U+FFFD;
      }
      /* fusion-pixel-12px-proportional-sc-latin-400-normal */
      @font-face {
        font-family: "Fusion Pixel 12px Proportional SC";
        font-style: normal;
        font-display: swap;
        font-weight: 400;
        src: url(https://cdn.jsdelivr.net/fontsource/fonts/fusion-pixel-12px-proportional-sc@latest/latin-400-normal.woff2)
          format("woff2");
      }
      /* fusion-pixel-10px-proportional-sc-latin-400-normal */
      @font-face {
        font-family: "Fusion Pixel 10px Proportional SC";
        font-style: normal;
        font-display: swap;
        font-weight: 400;
        src: url(https://cdn.jsdelivr.net/fontsource/fonts/fusion-pixel-10px-proportional-sc@latest/latin-400-normal.woff2)
          format("woff2");
      }
      /* fusion-pixel-8px-proportional-sc-latin-400-normal */
      @font-face {
        font-family: "Fusion Pixel 8px Proportional SC";
        font-style: normal;
        font-display: swap;
        font-weight: 400;
        src: url(https://cdn.jsdelivr.net/fontsource/fonts/fusion-pixel-8px-proportional-sc@latest/latin-400-normal.woff2)
          format("woff2");
      }

      /* =========================================
       1. VARIABLES & THEME
       ========================================= */
      :root {
        /* 亮色模式 (Light Mode) */
        --bg-color: #6a7680;
        --container-bg: #999;
        --border-color: #000;

        --cell-bg: #fff;
        --cell-bg-alt: #f1f3f5;

        --highlight: #0073aa; /* 品牌蓝 */
        --highlight-text: #fff;

        --text-main: #333;
        --text-muted: #666;

        --link-color: #4a5a6a;
        --link-hover: #0073aa;

        --pattern-col: rgba(0, 0, 0, 0.03);

        /* Canvas 专属颜色 */
        --canvas-bg: #f7f7f7;
        --canvas-line: #535353;
        --canvas-accent: #ff6600; /* 活力橙 (主角) */

        /* Fonts */
        --font-stack: "Verdana", "Geneva", sans-serif;
        --font-mono: "JetBrains Mono Variable", "Courier New", monospace;
        --font-pixel12: "Fusion Pixel 12px Proportional SC", monospace;
        --font-pixel10: "Fusion Pixel 10px Proportional SC", monospace;
        --font-pixel8: "Fusion Pixel 8px Proportional SC", monospace;
      }

      /* 暗色模式 (Dark Mode) */
      [data-theme="dark"] {
        --bg-color: #111;
        --container-bg: #444;
        --border-color: #666;

        --cell-bg: #1e1e1e;
        --cell-bg-alt: #252525;

        --highlight: #0073aa;
        --highlight-text: #fff;

        --text-main: #ddd;
        --text-muted: #888;

        --link-color: #8ab0c0;
        --link-hover: #3399cc;

        --pattern-col: rgba(255, 255, 255, 0.05);

        --canvas-bg: #202124;
        --canvas-line: #acacac;
        --canvas-accent: #ff6600;
      }

      /* =========================================
       2. BASE & RESET
       ========================================= */
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        background-color: var(--bg-color);
        background-image: radial-gradient(
          var(--container-bg) 1px,
          transparent 1px
        );
        background-size: 4px 4px;
        color: var(--text-main);
        padding: 20px 0;
        line-height: 1.5;
        font-family: var(--font-stack);
        font-size: 11px;
        -webkit-font-smoothing: antialiased; /* Better text rendering */
        font-variant-ligatures: common-ligatures; /* Enable ligatures */
        font-feature-settings: "liga", "calt"; /* Enable ligatures */
      }

      a {
        text-decoration: none;
        color: var(--link-color);
        transition: none;
      }
      a:hover {
        color: var(--link-hover);
      }
      button,
      input,
      textarea {
        font-family: inherit;
        outline: none;
      }

      /* =========================================
       3. LAYOUT (Grid System)
       ========================================= */
      .container {
        width: 100%;
        max-width: 1111px;
        margin: 0 auto;
        background-color: var(--container-bg);
        border: 1px solid var(--border-color);
        box-shadow: 0 0 20px rgba(0, 0, 0, 0.5);
        display: grid;
        grid-template-columns: 160px 1fr 220px;
        gap: 1px;
      }

      .cell {
        background-color: var(--cell-bg);
        overflow: hidden;
      }
      .cell-pad {
        padding: 12px;
      }
      .cell-alt {
        background-color: var(--cell-bg-alt);
      }

      .layout-sidebar-l {
        display: flex;
        flex-direction: column;
      }
      .layout-main {
        display: flex;
        flex-direction: column;
      }
      .layout-sidebar-r {
        display: flex;
        flex-direction: column;
      }
      .layout-footer {
        grid-column: 1 / -1;
        background: var(--cell-bg-alt);
        color: var(--text-muted);
        padding: 15px;
        text-align: center;
        font-family: var(--font-pixel10);
        font-size: 10px;
        letter-spacing: 1px;
      }

      /* LAYOUT Responsive */
      @media (max-width: 800px) {
        body {
          padding: 0;
        }
        .container {
          border: none;
          box-shadow: none;
          grid-template-columns: 1fr;
          gap: 1px;
        }
        .layout-main {
          order: 2;
        }
        .layout-sidebar-r {
          order: 3;
        }
        .layout-sidebar-l {
          order: 4;
        }
        .layout-footer {
          order: 5;
        }
      }

      /* =========================================
       4. COMPONENTS
       ========================================= */

      /* Header */
      .layout-header {
        grid-column: 1 / -1;
        height: 90px;
        position: relative;
        background-color: var(--cell-bg-alt);
        background-image: repeating-linear-gradient(
          45deg,
          transparent,
          transparent 2px,
          var(--pattern-col) 2px,
          var(--pattern-col) 4px
        );
      }
      .header-top-bar {
        height: 5px;
        background: var(--text-main);
        border-bottom: 1px solid var(--container-bg);
      }
      .site-area {
        position: absolute;
        bottom: 10px;
        left: 10px;
        z-index: 2;
        background: var(--cell-bg);
        padding: 5px 12px;
        border: 1px solid var(--container-bg);
        box-shadow: 4px 4px 0 rgba(0, 0, 0, 0.15);
      }
      .site-title {
        font-family: var(--font-pixel12);
        font-size: 24px;
        color: var(--text-main);
        line-height: 1;
      }
      .site-description {
        font-size: 12px;
        color: var(--text-muted);
        font-family: var(--font-pixel12);
        margin-top: 6px;
        display: block;
        border-top: 1px solid var(--container-bg);
        padding-top: 4px;
      }
      .site-slash {
        color: var(--canvas-accent);
      }

      /* Nav */
      .nav-bar {
        position: absolute;
        bottom: 15px;
        right: 20px;
        display: flex;
        gap: 4px;
        background: var(--cell-bg);
        padding: 4px;
        border: 1px solid var(--container-bg);
      }
      .nav-btn {
        background: var(--cell-bg);
        border: 1px solid var(--container-bg);
        color: var(--text-main);
        font-size: 10px;
        font-weight: bold;
        text-transform: uppercase;
        padding: 4px 10px;
        cursor: pointer;
        box-shadow: 1px 1px 0 var(--container-bg);
        transition: all 0s;
      }
      .nav-btn:hover,
      .nav-btn.active {
        background: var(--highlight);
        color: var(--highlight-text);
        border-color: var(--border-color);
        box-shadow: 1px 1px 0 var(--border-color);
        transform: translate(-1px, -1px);
      }

      /* Header Responsive */
      @media (max-width: 800px) {
        .layout-header {
          height: auto;
          min-height: 100px;
          display: flex;
          flex-direction: column;
          justify-content: center;
          align-items: center;
          padding-bottom: 10px;
        }
        .header-top-bar {
          width: 100%;
          position: absolute;
          top: 0;
        }
        .site-area {
          position: static;
          margin-top: 20px;
          margin-bottom: 10px;
          box-shadow: none;
        }
        .nav-bar {
          position: static;
          flex-wrap: wrap;
          justify-content: center;
          background: transparent;
          border: none;
          padding: 0;
        }
      }

      /* Modules */
      .module-header {
        background: var(--cell-bg-alt);
        background-image: linear-gradient(
          to bottom,
          var(--cell-bg),
          var(--cell-bg-alt)
        );
        padding: 6px 8px;
        font-size: 10px;
        font-weight: normal;
        color: var(--text-muted);
        text-transform: uppercase;
        border-top: 1px solid var(--container-bg);
        border-bottom: 1px solid var(--container-bg);
        letter-spacing: 1px;
        margin-top: 1px;
      }
      aside section:first-child .module-header {
        margin-top: 0;
        border-top: none;
      }

      /* Pod Player */
      .pod-container {
        background: var(--cell-bg-alt);
        padding: 10px;
      }
      .pod-player {
        background: var(--cell-bg);
        border: 1px solid var(--container-bg);
        border-radius: 4px;
        padding: 10px;
        box-shadow: inset 0 0 5px rgba(0, 0, 0, 0.05);
        text-align: center;
      }
      .pod-screen {
        background: var(--cell-bg-alt);
        border: 1px solid var(--container-bg);
        border-radius: 2px;
        padding: 6px;
        margin-bottom: 10px;
        font-family: var(--font-pixel10);
        font-size: 10px;
        color: var(--text-muted);
        height: 32px;
        display: flex;
        align-items: center;
        justify-content: center;
        box-shadow: inset 1px 1px 2px rgba(0, 0, 0, 0.05);
      }
      .pod-wheel {
        width: 60px;
        height: 60px;
        border-radius: 50%;
        background: var(--cell-bg-alt);
        border: 1px solid var(--container-bg);
        margin: 0 auto;
        position: relative;
        display: flex;
        align-items: center;
        justify-content: center;
      }
      .pod-btn-center {
        width: 24px;
        height: 24px;
        border-radius: 50%;
        background: var(--cell-bg);
        border: 1px solid var(--container-bg);
        box-shadow: 1px 1px 2px rgba(0, 0, 0, 0.1);
      }
      .pod-control-icon {
        position: absolute;
        font-size: 8px;
        color: var(--text-muted);
        font-family: var(--font-pixel8);
      }
      .pod-active-btn {
        background-color: transparent;
        border-radius: 2px;
        border: none;
        cursor: pointer;
      }
      .pod-active-btn:hover {
        background-color: var(--cell-bg);
        border: 1px solid var(--container-bg);
        font-weight: bold;
      }
      .pod-top {
        top: 4px;
        left: 50%;
        transform: translateX(-50%);
      }
      .pod-bottom {
        bottom: 4px;
        left: 50%;
        transform: translateX(-50%);
      }
      .pod-left {
        left: 4px;
        top: 50%;
        transform: translateY(-50%);
      }
      .pod-right {
        right: 4px;
        top: 50%;
        transform: translateY(-50%);
      }

      /* Badges */
      .badge-grid {
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        gap: 6px;
      }
      .badge-item {
        aspect-ratio: 1;
        background: var(--cell-bg);
        border: 1px solid var(--container-bg);
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 20px;
        font-family: var(--font-pixel10);
        box-shadow: 1px 1px 0 var(--container-bg);
        transition: transform 0.1s;
        filter: grayscale(100%);
        width: 100%;
        max-width: 50px;
        margin: 0 auto;
      }
      .badge-item:hover {
        background: var(--cell-bg-alt);
        border-color: var(--text-muted);
        filter: grayscale(0%);
      }

      /* Theme Toggle */
      .theme-btn {
        width: 100%;
        background: var(--cell-bg);
        border: 1px solid var(--container-bg);
        color: var(--text-main);
        padding: 4px;
        font-family: var(--font-mono);
        font-size: 10px;
        cursor: pointer;
      }
      .theme-btn:hover {
        background: var(--highlight);
        color: var(--highlight-text);
        border-color: var(--border-color);
      }

      /* Stats */
      .stat-label {
        text-align: center;
        font-size: 9px;
        color: var(--text-muted);
        margin-bottom: 4px;
        font-family: var(--font-mono);
      }
      .counter-box {
        display: flex;
        gap: 2px;
        justify-content: center;
        background: var(--cell-bg);
        padding: 4px;
        border: 1px solid var(--container-bg);
        margin-bottom: 8px;
      }
      .counter-digit {
        background: var(--cell-bg);
        color: var(--text-main);
        font-family: var(--font-mono);
        font-weight: bold;
        font-size: 11px;
        width: 16px;
        text-align: center;
        border: 1px solid var(--container-bg);
        border-bottom: 2px solid var(--container-bg);
        border-radius: 2px;
      }
      .stat-row {
        display: flex;
        justify-content: space-between;
        font-family: var(--font-mono);
        font-size: 9px;
        color: var(--text-muted);
        border-bottom: 1px dotted var(--container-bg);
        padding: 2px 0;
      }
      .stat-value {
        font-weight: bold;
        color: var(--text-main);
      }
      .stat-value.highlight {
        color: var(--link-hover);
      }
      .status-dots {
        display: flex;
        justify-content: center;
        gap: 4px;
        margin-top: 8px;
        opacity: 0.4;
      }
      .status-dot {
        width: 10px;
        height: 10px;
        border-radius: 50%;
      }

      /* Profile */
      .profile-container {
        display: flex;
        flex-direction: column;
        align-items: center;
        margin-bottom: 10px;
      }
      .profile-avatar {
        width: 140px;
        height: 140px;
        background: var(--cell-bg-alt);
        border: 1px solid var(--border-color);
        margin-bottom: 8px;
        display: flex;
        justify-content: center;
        align-items: center;
        box-shadow: 2px 2px 0 var(--container-bg);
      }
      .profile-avatar-image {
        display: block;
        width: 100%;
        height: 100%;
      }
      .profile-name {
        font-weight: bold;
        font-family: var(--font-stack);
        font-size: 12px;
        margin-bottom: 2px;
      }
      .profile-info {
        font-family: var(--font-mono);
        font-size: 9px;
        color: var(--text-muted);
        line-height: 1.6;
        border-top: 1px dotted var(--container-bg);
        padding-top: 8px;
      }
      .profile-links {
        display: grid;
        gap: 4px;
        margin-top: 8px;
      }
      .profile-btn {
        display: block;
        background: var(--cell-bg-alt);
        padding: 2px 4px;
        border: 1px solid var(--container-bg);
        text-align: center;
        text-decoration: none;
        color: var(--text-muted);
      }
      .profile-btn:hover {
        background: var(--highlight);
        color: var(--highlight-text);
        border-color: var(--border-color);
      }

      /* Calendar */
      .calendar-wrapper {
        background: var(--cell-bg-alt);
        border: 1px solid var(--cell-bg);
        border-right-color: var(--container-bg);
        border-bottom-color: var(--container-bg);
        padding: 6px;
        font-family: var(--font-mono);
      }
      .cal-nav {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 6px;
        background: var(--text-main);
        color: var(--cell-bg);
        padding: 2px;
        border: 1px solid var(--border-color);
        box-shadow: inset 1px 1px 0 rgba(255, 255, 255, 0.1);
      }
      .cal-btn {
        background: var(--container-bg);
        border: 1px solid var(--cell-bg);
        border-right-color: var(--text-main);
        border-bottom-color: var(--text-main);
        color: var(--cell-bg);
        font-size: 9px;
        width: 16px;
        height: 16px;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        line-height: 1;
      }
      .cal-btn:hover {
        background: var(--link-hover);
      }
      .cal-btn:active {
        border: 1px solid var(--text-main);
        border-right-color: var(--cell-bg);
        border-bottom-color: var(--cell-bg);
        background: var(--text-muted);
      }
      .cal-table {
        width: 100%;
        border-collapse: separate;
        border-spacing: 2px;
        font-size: 9px;
        text-align: center;
      }
      .cal-table th {
        font-weight: normal;
        color: var(--text-muted);
        font-size: 8px;
      }
      .cal-table td {
        background: var(--cell-bg);
        border: 1px solid var(--cell-bg);
        border-right-color: var(--container-bg);
        border-bottom-color: var(--container-bg);
        color: var(--text-main);
        padding: 2px;
      }
      .cal-table td.cal-today {
        background: var(--highlight);
        color: var(--highlight-text);
        font-weight: bold;
        border: 1px solid var(--border-color);
        box-shadow: 1px 1px 0 rgba(0, 0, 0, 0.2);
      }
      .cal-table td.cal-has-post {
        background-color: var(--link-color);
        color: var(--cell-bg);
        font-weight: bold;
        border: 1px solid var(--text-main);
        opacity: 0.8;
        cursor: pointer;
      }
      .cal-table td.cal-has-post:hover {
        background-color: var(--link-hover);
        border-color: var(--cell-bg-alt);
        color: var(--cell-bg-alt);
      }

      /* Link Grid */
      .link-grid {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 10px;
        justify-items: center;
      }
      .link-box {
        background: var(--cell-bg-alt);
        width: 88px;
        height: 31px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 8px;
        color: var(--text-muted);
        text-align: center;
        position: relative;
        overflow: hidden;
      }
      .link-box img {
        display: block;
        width: 100%;
        height: 100%;
      }
      .scanlines {
        position: absolute;
        inset: 0;
        background: repeating-linear-gradient(
          45deg,
          transparent,
          transparent 2px,
          var(--pattern-col) 2px,
          var(--pattern-col) 4px
        );
        pointer-events: none;
        border: 1px solid var(--container-bg);
      }

      /* Post & Content */
      .post-card {
        border-bottom: 1px solid var(--container-bg);
        margin-bottom: 0;
        background: var(--cell-bg);
        padding-bottom: 20px;
      }
      .post-card:last-child {
        border-bottom: none;
      }
      .post-hero {
        width: 100%;
        height: 220px;
        overflow: hidden;
        position: relative;
        background: var(--cell-bg-alt);
        border-bottom: 1px solid var(--container-bg);
      }
      .post-canvas {
        width: 100%;
        height: 100%;
        display: block;
        image-rendering: pixelated;
        filter: none;
      }
      .post-canvas:hover {
        filter: hue-rotate(185deg);
      }
      .post-weather {
        position: absolute;
        top: 10px;
        left: 10px;
        background: var(--text-main);
        color: var(--cell-bg);
        padding: 3px 10px;
        font-size: 10px;
        font-family: var(--font-pixel10);
        border: 1px solid var(--cell-bg);
        z-index: 2;
        box-shadow: 2px 2px 0 rgba(0, 0, 0, 0.5);
        pointer-events: none;
      }
      .post-content {
        padding: 15px 20px 0 20px;
      }
      .post-title {
        font-family: var(--font-pixel10);
        font-size: 20px;
        letter-spacing: 2px;
        color: var(--text-main);
        margin-bottom: 6px;
      }
      .post-title a {
        color: var(--text-main);
      }
      .post-title a:hover {
        color: var(--highlight);
      }
      .post-title-slash {
        letter-spacing: -2px;
        color: var(--canvas-accent);
      }
      .post-meta {
        font-size: 9px;
        color: var(--text-muted);
        font-family: var(--font-mono);
        margin-bottom: 10px;
      }
      .post-meta a:last-child {
        font-family: var(--font-pixel12);
      }
      .post-excerpt {
        color: var(--text-muted);
        font-family: var(--font-pixel12);
        font-size: 12px;
        letter-spacing: 1px;
        line-height: 1.6;
        margin-bottom: 12px;
      }
      .btn-read {
        display: inline-block;
        background: var(--cell-bg);
        border: 1px solid var(--container-bg);
        color: var(--text-main);
        padding: 3px 8px;
        font-family: var(--font-pixel10);
        font-size: 10px;
        cursor: pointer;
        box-shadow: 1px 1px 0 var(--container-bg);
      }
      .btn-read:hover {
        background: var(--highlight);
        border-color: var(--border-color);
        color: var(--highlight-text);
        box-shadow: 1px 1px 0 var(--border-color);
      }

      /* Comments */
      .comment-section {
        margin-top: 30px;
        border-top: 1px dotted var(--container-bg);
        padding: 20px;
        background: var(--cell-bg);
      }
      .comment-title {
        font-weight: bold;
        font-family: var(--font-pixel12);
        font-size: 12px;
        letter-spacing: 1px;
        margin-bottom: 15px;
        color: var(--text-main);
        background: var(--cell-bg-alt);
        display: inline-block;
        padding: 2px 6px;
      }
      .comment-item {
        margin-bottom: 15px;
        font-family: var(--font-pixel12);
        font-size: 12px;
        letter-spacing: 1px;
        list-style-type: none;
        position: relative;
        padding-left: 46px;
      }
      .comment-head {
        display: flex;
        justify-content: space-between;
        margin-bottom: 4px;
        border-bottom: 1px solid var(--cell-bg-alt);
        padding-bottom: 2px;
      }
      .comment-avatar {
        object-fit: cover; /* 可选: cover | contain | fill | none | scale-down */
        position: absolute;
        top: 2px;
        left: 0;
        width: 36px;
        height: 36px;
      }
      .comment-user {
        font-family: var(--font-pixel10);
        font-size: 10px;
        font-weight: bold;
        color: var(--text-main);
      }
      .comment-author-badge {
        background: var(--text-main);
        color: var(--cell-bg);
        padding: 0 2px;
        font-family: var(--font-pixel8);
        font-size: 8px;
        font-weight: normal;
        margin-left: 5px;
      }
      .comment-date {
        color: var(--text-muted);
        font-family: var(--font-pixel8);
        font-size: 8px;
      }
      .comment-body {
        color: var(--text-muted);
        line-height: 1.4;
        font-size: 12px;
      }
      .comment-replies {
        margin-top: 10px;
        padding-left: 10px;
        border-left: 1px dotted var(--container-bg);
      }

      /* Form */
      .comment-form {
        margin-top: 25px;
        background: var(--cell-bg-alt);
        padding: 15px;
        border: 1px solid var(--container-bg);
      }
      .form-label {
        font-weight: bold;
        font-family: var(--font-pixel10);
        font-size: 10px;
        letter-spacing: 1px;
        margin-bottom: 8px;
        color: var(--text-muted);
      }
      .form-row {
        display: flex;
        gap: 10px;
        margin-bottom: 8px;
      }
      .form-input {
        flex: 1;
        border: 1px solid var(--container-bg);
        padding: 6px;
        font-size: 12px;
        font-family: var(--font-pixel12);
        letter-spacing: 2px;
        background: var(--cell-bg);
        color: var(--text-main);
      }
      .form-input::placeholder {
        font-family: var(--font-pixel10);
        font-size: 10px;
        letter-spacing: 1px;
      }
      .form-submit {
        background: var(--highlight);
        border: 1px solid var(--border-color);
        color: var(--highlight-text);
        padding: 0 20px;
        cursor: pointer;
        font-family: var(--font-pixel10);
        font-size: 10px;
        letter-spacing: 3px;
        font-weight: bold;
        flex: 0 0 auto;
        box-shadow: 2px 2px 0 rgba(0, 0, 0, 0.1);
      }
      .form-submit:hover {
        background: var(--cell-bg);
        color: var(--text-main);
        transform: translate(1px, 1px);
        box-shadow: 1px 1px 0 rgba(0, 0, 0, 0.1);
      }

      /* Pagination */
      .pagination {
        display: flex;
        justify-content: center;
        gap: 5px;
        padding: 20px 0;
        font-family: var(--font-mono);
        font-size: 10px;
        background: var(--cell-bg);
        margin-top: 1px;
      }
      .page-btn {
        border: 1px solid var(--container-bg);
        padding: 4px 8px;
        cursor: pointer;
        color: var(--text-muted);
        background: var(--cell-bg);
      }
      .page-btn:hover,
      .page-btn.active {
        border-color: var(--border-color);
        background: var(--highlight);
        color: var(--highlight-text);
      }
      .page-dots {
        padding: 4px;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <!-- HEADER -->
      <header class="layout-header">
        <div class="header-top-bar"></div>
        <section class="site-area">
          <h1 class="site-title">[米随随] s5s5</h1>
          <p class="site-description">
            <span class="site-slash">//</span>
            本站是基于人类交互的，您的想象决定了我们的应用！
          </p>
        </section>
        <nav class="nav-bar" aria-label="Main Navigation">
          <a href="#" class="nav-btn active">Home</a>
          <a href="#" class="nav-btn">First Category</a>
          <a href="#" class="nav-btn">Other</a>
          <a href="#" class="nav-btn">About Me</a>
        </nav>
      </header>

      <!-- LEFT SIDEBAR -->
      <aside class="cell layout-sidebar-l">
        <section>
          <h3 class="module-header">:: MUSIC</h3>
          <div class="cell-pad pod-container">
            <div class="pod-player">
              <div class="pod-screen">
                <marquee scrollamount="2">Song: Lofi_Dream.mp3</marquee>
              </div>
              <div class="pod-wheel">
                <div class="pod-control-icon pod-top">MENU</div>
                <button
                  type="button"
                  class="pod-control-icon pod-bottom pod-active-btn"
                >
                  ||
                </button>
                <button
                  type="button"
                  class="pod-control-icon pod-left pod-active-btn"
                >
                  |&lt;
                </button>
                <button
                  type="button"
                  class="pod-control-icon pod-right pod-active-btn"
                >
                  &gt;|
                </button>
                <div class="pod-btn-center"></div>
              </div>
            </div>
          </div>
        </section>

        <section>
          <h3 class="module-header">:: BADGES</h3>
          <div class="cell-pad cell-alt">
            <div class="badge-grid">
              <div class="badge-item">♒</div>
              <div class="badge-item">♂</div>
              <div class="badge-item">⇒</div>
              <div class="badge-item">Ω</div>
              <div class="badge-item">中</div>
              <div class="badge-item">☃</div>
              <div class="badge-item">⌕</div>
              <div class="badge-item">⛓</div>
            </div>
          </div>
        </section>

        <section>
          <h3 class="module-header">:: SETTINGS</h3>
          <div class="cell-pad">
            <button type="button" id="theme-toggle" class="theme-btn">
              THEME: LIGHT
            </button>
          </div>
        </section>

        <section>
          <h3 class="module-header">:: STATS</h3>
          <div class="cell-pad">
            <div class="stat-label">VISITORS</div>
            <div class="counter-box">
              <span class="counter-digit">0</span
              ><span class="counter-digit">8</span
              ><span class="counter-digit">4</span>
              <span class="counter-digit">2</span
              ><span class="counter-digit">1</span
              ><span class="counter-digit">9</span>
            </div>
            <div style="margin-top: 8px">
              <div class="stat-row">
                <span>ONLINE:</span><span class="stat-value highlight">12</span>
              </div>
              <div class="stat-row">
                <span>TODAY:</span><span class="stat-value">143</span>
              </div>
              <div class="stat-row">
                <span>SINCE:</span><span class="stat-value">2003</span>
              </div>
            </div>
            <div class="status-dots">
              <div
                class="status-dot"
                style="background: #f90"
                title="Firefox"
              ></div>
              <div class="status-dot" style="background: #09c" title="IE"></div>
              <div
                class="status-dot"
                style="background: #d00"
                title="Opera"
              ></div>
            </div>
          </div>
        </section>
      </aside>

      <!-- CENTER MAIN CONTENT -->
      <main class="cell layout-main" id="main-content-area">
        <!-- JS will render Hero Posts with Canvas here -->
      </main>

      <!-- RIGHT SIDEBAR -->
      <aside class="cell layout-sidebar-r">
        <section>
          <h3 class="module-header">:: PROFILE</h3>
          <div class="cell-pad" style="padding-bottom: 5px">
            <div class="profile-container">
              <div class="profile-avatar">
                <img
                  class="profile-avatar-image"
                  src="https://s5s5.me/wp-content/uploads/2015/11/logo.png"
                  alt="[米随随] s5s5"
                />
              </div>
              <p class="profile-name">Xiaochao Liu</p>
            </div>
            <div class="profile-info">
              <p style="margin-bottom: 4px">> Front-end</p>
              <p style="margin-bottom: 8px">> Loc: Chengdu, China</p>
              <p class="profile-links">
                <a
                  href="https://linkedin.com/in/s5s5"
                  target="_blank"
                  class="profile-btn"
                  >[ LinkedIn ]</a
                >
                <a
                  href="https://github.com/s5s5"
                  target="_blank"
                  class="profile-btn"
                  >[ Github ]</a
                >
                <a href="mailto:s5s5cn@gmail.com" class="profile-btn"
                  >[ Mail ]</a
                >
              </p>
            </div>
          </div>
        </section>

        <section>
          <h3 class="module-header">:: CALENDAR</h3>
          <div class="cell-pad" style="padding: 10px 8px">
            <div class="calendar-wrapper">
              <div class="cal-nav">
                <button type="button" class="cal-btn">&lt;</button>
                <span style="font-weight: bold">DEC 2025</span>
                <button type="button" class="cal-btn">&gt;</button>
              </div>
              <nav aria-label="Calendar Navigation">
                <table class="cal-table">
                  <thead>
                    <tr>
                      <td>S</td>
                      <td>M</td>
                      <td>T</td>
                      <td>W</td>
                      <td>T</td>
                      <td>F</td>
                      <td>S</td>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td
                        style="
                          color: var(--text-muted);
                          border-color: var(--container-bg);
                        "
                      >
                        30
                      </td>
                      <td>1</td>
                      <td>2</td>
                      <td>3</td>
                      <td>4</td>
                      <td class="cal-has-post">5</td>
                      <td>6</td>
                    </tr>
                    <tr>
                      <td>7</td>
                      <td>8</td>
                      <td>9</td>
                      <td>10</td>
                      <td>11</td>
                      <td class="cal-has-post">12</td>
                      <td>13</td>
                    </tr>
                    <tr>
                      <td>14</td>
                      <td>15</td>
                      <td>16</td>
                      <td>17</td>
                      <td>18</td>
                      <td class="cal-has-post">19</td>
                      <td>20</td>
                    </tr>
                    <tr>
                      <td>21</td>
                      <td>22</td>
                      <td class="cal-has-post">23</td>
                      <td>24</td>
                      <td class="cal-has-post">25</td>
                      <td class="cal-today">26</td>
                      <td>27</td>
                    </tr>
                    <tr>
                      <td>28</td>
                      <td>29</td>
                      <td>30</td>
                      <td>31</td>
                      <td
                        style="
                          color: var(--text-muted);
                          border-color: var(--container-bg);
                        "
                      >
                        1
                      </td>
                      <td
                        style="
                          color: var(--text-muted);
                          border-color: var(--container-bg);
                        "
                      >
                        2
                      </td>
                      <td
                        style="
                          color: var(--text-muted);
                          border-color: var(--container-bg);
                        "
                      >
                        3
                      </td>
                    </tr>
                  </tbody>
                </table>
              </nav>
            </div>
          </div>
        </section>

        <section>
          <h3 class="module-header">:: LINK</h3>
          <div class="cell-pad cell-alt">
            <div class="link-grid">
              <div class="link-box">
                <img src="./88x31_1.png" alt="88x31 Button" />
              </div>
              <div class="link-box">
                <img src="./88x31_2.png" alt="88x31 Button 2" />
              </div>
              <!--              <div class="link-box">-->
              <!--                <div class="scanlines"></div>-->
              <!--                <span>[Link Here]</span>-->
              <!--              </div>-->
            </div>
          </div>
        </section>
      </aside>

      <!-- FOOTER -->
      <footer class="layout-footer">
        © 2003-2025 [米随随] s5s5. ALL RIGHTS RESERVED.<br />
        <a
          href="https://beian.miit.gov.cn/"
          target="_blank"
          rel="nofollow noopener"
          >蜀ICP备16014041号-1</a
        >
      </footer>
    </div>

    <!-- JAVASCRIPT -->
    <script>
      // --- THEME LOGIC ---
      const themeBtn = document.getElementById("theme-toggle");
      const htmlEl = document.documentElement;
      // Default to system, but only set mode when button clicked
      let currentThemeMode = localStorage.getItem("themeMode");

      // Initial Setup
      if (!currentThemeMode) {
        const systemDark = window.matchMedia(
          "(prefers-color-scheme: dark)"
        ).matches;
        currentThemeMode = systemDark ? "dark" : "light";
      }

      function applyTheme() {
        if (currentThemeMode === "dark") {
          htmlEl.setAttribute("data-theme", "dark");
        } else {
          htmlEl.removeAttribute("data-theme");
        }
        themeBtn.innerText = "THEME: " + currentThemeMode.toUpperCase();
        setTimeout(redrawAllCanvases, 50);
      }

      themeBtn.addEventListener("click", () => {
        // Toggle only between light and dark
        currentThemeMode = currentThemeMode === "light" ? "dark" : "light";
        localStorage.setItem("themeMode", currentThemeMode);
        applyTheme();
      });

      function getCSSVal(name) {
        return getComputedStyle(document.documentElement)
          .getPropertyValue(name)
          .trim();
      }

      // --- DATA ---
      const posts = [
        {
          title: "探索数字边界",
          date: "2024-10-25 12:34",
          cat: "First Category",
          weather: "Lightning",
          excerpt:
            "沉浸在像素完美的失落艺术中。有限的分辨率如何在现代网页设计中激发无限的想象力。"
        },
        {
          title: "信息的架构",
          date: "2024-10-24 12:34",
          cat: "First Category",
          weather: "Fog",
          excerpt:
            "构建经得起时间考验的结构。为什么网格布局不仅仅是一个CSS属性，更是一种哲学。"
        },
        {
          title: "午夜编程时光",
          date: "2024-10-23 12:34",
          cat: "First Category",
          weather: "Rain",
          excerpt:
            "凌晨3点有一种独特的寂静。唯一的声音是键盘的机械敲击声和服务器的嗡嗡声。"
        },
        {
          title: "阴天随笔",
          date: "2024-10-22 12:34",
          cat: "Life",
          weather: "Overcast",
          excerpt: "一个灰色的下午，适合思考和发呆。"
        },
        {
          title: "多云转晴",
          date: "2024-10-21 12:34",
          cat: "Design",
          weather: "Cloudy",
          excerpt: "云层的变化给天空带来了丰富的层次感。"
        },
        {
          title: "复古游戏复兴",
          date: "2024-10-22 12:34",
          cat: "First Category",
          weather: "Sunny",
          excerpt:
            "为什么我们不断回顾8位经典。这不仅仅是怀旧，而是关于纯粹的游戏机制。"
        },
        {
          title: "Markdown 样式全功能展示",
          date: "2024-10-20 12:34",
          cat: "Docs",
          weather: "Snow",
          comments: [
            {
              user: "PixelFan_01",
              date: "2024-10-21 10:00",
              content: "这篇文章排版很棒！很有 K10k 当年的感觉。",
              replies: [
                {
                  user: "s5s5",
                  date: "2024-10-21 10:05",
                  content: "谢谢支持！我会继续保持这种风格。",
                  isAuthor: true
                }
              ]
            },
            {
              user: "Guest_88",
              date: "2024-10-22 14:20",
              content: "代码块的配色也很舒服，是 Monokai 吗？",
              replies: []
            }
          ],
          excerpt: `
                <h1 style="font-size:20px; font-weight:bold; margin-bottom:10px; color:var(--text-main); font-family:var(--font-pixel10);">一级标题示例 (H1)</h1>
                <p style="margin-bottom:8px;">这是一篇展示常用 <strong>Markdown</strong> 语法的测试文章。包含各种标准元素的 HTML 渲染演示。</p>

                <h2 style="font-size:16px; font-weight:bold; margin:15px 0 8px 0; border-bottom:1px solid var(--container-bg); padding-bottom:4px; color:var(--text-main); font-family:var(--font-pixel8);">1. 文本样式与排版</h2>
                <p>我们可以使用 <strong>加粗 (Bold)</strong>，<em>斜体 (Italic)</em>，以及 <span style="text-decoration:line-through; color:var(--text-muted);">删除线 (Strike)</span>。</p>
                <hr style="border:0; border-top:1px solid var(--container-bg); margin:10px 0;">
                <p>链接演示：访问 <a href="#" style="color:var(--highlight)">OpenAI 官网</a> 或 <a href="#" style="color:var(--highlight)">GitHub 仓库</a>。</p>

                <h2 style="font-size:16px; font-weight:bold; margin:15px 0 8px 0; border-bottom:1px solid var(--container-bg); padding-bottom:4px; color:var(--text-main); font-family:var(--font-pixel8);">2. 列表展示</h2>
                <p><strong>无序列表：</strong></p>
                <ul style="list-style-type: square; margin-left: 20px; color:var(--text-muted); margin-bottom:10px;">
                    <li>第一点：结构化数据的重要性
                        <ul style="list-style-type: circle; margin-left: 20px;">
                            <li>子项 A：细节决定成败</li>
                            <li>子项 B：保持一致性</li>
                        </ul>
                    </li>
                    <li>第二点：清晰的排版提升阅读体验</li>
                    <li>第三点：保持简洁</li>
                </ul>

                <p><strong>有序列表：</strong></p>
                <ol style="margin-left: 20px; color:var(--text-muted); margin-bottom:10px;">
                    <li>定义目标</li>
                    <li>执行计划</li>
                    <li>复盘结果</li>
                </ol>

                <h2 style="font-size:16px; font-weight:bold; margin:15px 0 8px 0; border-bottom:1px solid var(--container-bg); padding-bottom:4px; color:var(--text-main); font-family:var(--font-pixel8);">3. 引用块 (Blockquote)</h2>
                <blockquote style="border-left: 4px solid var(--highlight); background:var(--cell-bg-alt); padding: 8px 12px; margin: 10px 0; color: var(--text-muted); font-style: italic;">
                    “设计不仅是它的外观和感觉，设计就是它的运作方式。” <br>
                    <span style="display:block; text-align:right; font-size:9px; margin-top:4px;">—— 史蒂夫·乔布斯</span>
                </blockquote>

                <h2 style="font-size:16px; font-weight:bold; margin:15px 0 8px 0; border-bottom:1px solid var(--container-bg); padding-bottom:4px; color:var(--text-main); font-family:var(--font-pixel8);">4. 媒体与表格</h2>
                <p><strong>图片占位：</strong></p>
                <div style="background:var(--cell-bg-alt); width:100%; height:100px; display:flex; align-items:center; justify-content:center; color:var(--text-muted); margin-bottom:10px; border:1px dashed var(--container-bg);">[ IMAGE PLACEHOLDER ]</div>

                <p><strong>数据表格：</strong></p>
                <table style="width:100%; border-collapse:collapse; font-size:12px; margin-bottom:10px; font-family:var(--font-pixel12);">
                    <thead>
                        <tr style="border-bottom:1px solid var(--text-muted); background:var(--cell-bg-alt);">
                            <th style="padding:4px; text-align:left;">ID</th>
                            <th style="padding:4px; text-align:left;">Module</th>
                            <th style="padding:4px; text-align:left;">Status</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr style="border-bottom:1px dotted var(--container-bg);"><td style="padding:4px;">01</td><td style="padding:4px;">Core System</td><td style="padding:4px; color:green;">Online</td></tr>
                        <tr style="border-bottom:1px dotted var(--container-bg);"><td style="padding:4px;">02</td><td style="padding:4px;">Network</td><td style="padding:4px; color:orange;">Laggy</td></tr>
                        <tr><td style="padding:4px;">03</td><td style="padding:4px;">Database</td><td style="padding:4px; color:red;">Offline</td></tr>
                    </tbody>
                </table>

                <h2 style="font-size:16px; font-weight:bold; margin:15px 0 8px 0; border-bottom:1px solid var(--container-bg); padding-bottom:4px; color:var(--text-main); font-family:var(--font-pixel8);">5. 代码块 (Code Block)</h2>
                <p>行内代码如 <code style="background:var(--cell-bg-alt); border:1px solid var(--container-bg); padding:1px 3px; font-family:var(--font-mono); font-size:12px; color:var(--highlight);">const x = 10;</code> 非常适合短指令。</p>
                <div style="background:var(--cell-bg-alt); color:var(--text-main); border:1px solid var(--container-bg); padding:12px; font-family:var(--font-mono); font-size:12px; margin:10px 0; border-radius:4px; overflow-x:auto;">
<span style="color:#cc99cd;">function</span> <span style="color:#61aeee;">initWorld</span>() {
  <span style="color:#cc99cd;">const</span> pixel = <span style="color:#7ec699;">"Ready"</span>;
  <span style="color:#e6c07b;">console</span>.<span style="color:#61aeee;">log</span>(<span style="color:#98c379;">\`System status: \${pixel}\`</span>);
  <span style="color:#7a8b99;">// TODO: Load assets</span>
}
                </div>
            `
        }
      ];

      const mainArea = document.getElementById("main-content-area");
      const weatherMap = {
        Lightning: "闪电",
        Fog: "雾",
        Rain: "雨",
        Sunny: "晴",
        Snow: "雪",
        Overcast: "阴",
        Cloudy: "多云"
      };

      function renderComments(comments) {
        if (!comments || comments.length === 0) return "";
        return comments
          .map(
            (c) => `
            <li class="comment-item">
                <article>
                    <footer class="comment-head">
                        <img src="./88x31-1.png" alt="" class="comment-avatar" />
                        <span class="comment-user">${c.user} ${c.isAuthor ? '<span class="comment-author-badge">AUTHOR</span>' : ""}</span>
                        <span class="comment-date">${c.date}</span>
                    </footer>
                    <p class="comment-body">${c.content}</p>
                </article>
                ${c.replies && c.replies.length > 0 ? `<ol class="comment-replies">${renderComments(c.replies)}</ol>` : ""}
            </li>
        `
          )
          .join("");
      }

      // --- RENDER POSTS ---
      posts.forEach((post, index) => {
        const card = document.createElement("article");
        card.className = "post-card";

        let commentsHTML = "";
        if (post.comments) {
          commentsHTML = `
                <section class="comment-section">
                    <h2 class="comment-title">// 评论列表 (${post.comments.length})</h2>
                    <ol>${renderComments(post.comments)}</ol>
                    <form class="comment-form">
                        <div class="form-label">LEAVE A REPLY:</div>
                        <textarea class="form-input" style="width:100%; margin-bottom:8px; height:60px;" placeholder="Your Message..."></textarea>
                        <div class="form-row"><input type="text" class="form-input" placeholder="Name"><input type="email" class="form-input" placeholder="Email"></div>
                        <div class="form-row"><input type="url" class="form-input" placeholder="Website (http://)"><button type="submit" class="form-submit">发表评论</button></div>
                    </form>
                </section>
            `;
        }

        const canvasId = `hero-canvas-${index}`;
        const weatherCN = weatherMap[post.weather] || "";
        const weatherLabel = post.weather
          ? `${weatherCN} ${post.weather.toUpperCase()}`
          : post.cat;

        card.innerHTML = `
            <a href="#">
                <figure class="post-hero">
                    <canvas id="${canvasId}" class="post-canvas"></canvas>
                    <figcaption class="post-weather">${weatherLabel}</figcaption>
                </figure>
            </a>
            <div class="post-content">
                <header>
                    <h2 class="post-title">
                        <span class="post-title-slash">//</span>
                        <a href="#">${post.title}</a>
                    </h2>
                </header>
                <div class="post-meta">
                    POSTED ON
                    <a href="#">${post.date}</a>
                    // BY s5s5 // IN
                    <a href="#">${post.cat}</a>
                    //
                    <a href="#">3 评论</a>
                  </div>
                <div class="post-excerpt">${post.excerpt}</div>
                <p><a href="#" class="btn-read">阅读全文 &gt;&gt;</a></p>
            </div>
            ${commentsHTML}
        `;
        mainArea.appendChild(card);
      });

      const pagination = document.createElement("nav");
      pagination.className = "pagination";
      pagination.ariaLabel = "Pagination";
      pagination.innerHTML = `<a href="#" class="page-btn">[PREV]</a><a href="#" class="page-btn active">1</a><a href="#" class="page-btn">2</a><a href="#" class="page-btn">3</a><span class="page-dots">...</span><a href="#" class="page-btn">[NEXT]</a>`;
      mainArea.appendChild(pagination);

      document.querySelectorAll(".nav-btn").forEach((item) => {
        item.addEventListener("click", function () {
          document
            .querySelectorAll(".nav-btn")
            .forEach((n) => n.classList.remove("active"));
          this.classList.add("active");
        });
      });

      // --- CANVAS LOGIC ---

      function redrawAllCanvases() {
        posts.forEach((post, index) => {
          const canvas = document.getElementById(`hero-canvas-${index}`);
          if (canvas) {
            if (canvas.parentElement.offsetWidth === 0) return;

            let wType = (post.weather || "Sunny").toLowerCase();
            if (wType === "rain") wType = "rainy";
            if (wType === "snow") wType = "snowy";
            if (wType === "fog") wType = "foggy";

            const colors = {
              bg: getCSSVal("--canvas-bg"),
              line: getCSSVal("--canvas-line"),
              accent: getCSSVal("--canvas-accent")
            };

            const dpr = window.devicePixelRatio || 1;
            const rect = canvas.parentElement.getBoundingClientRect();

            canvas.width = rect.width * dpr;
            canvas.height = rect.height * dpr;

            const ctx = canvas.getContext("2d");
            ctx.setTransform(1, 0, 0, 1, 0, 0);
            ctx.scale(dpr, dpr);

            // Disable smoothing for sharp pixels
            ctx.imageSmoothingEnabled = false;

            drawDinoStyleScene(ctx, rect.width, rect.height, wType, colors);
          }
        });
      }

      function drawDinoStyleScene(ctx, w, h, weather, colors) {
        // Clear
        ctx.fillStyle = colors.bg;
        ctx.fillRect(0, 0, w, h);

        // Ground Line
        const groundY = h - 20;
        ctx.fillStyle = colors.line;
        ctx.fillRect(0, groundY, w, 1);

        // Ground Noise
        for (let i = 0; i < w; i += 10) {
          if (Math.random() > 0.6) {
            const nw = Math.random() * 4 + 1;
            ctx.fillRect(i, groundY + 2 + Math.random() * 5, nw, 1);
          }
        }

        // Weather & Sky
        drawRetroWeather(ctx, w, h, weather, colors);

        // Scenery
        const numProps = 2 + Math.floor(Math.random() * 3);
        for (let i = 0; i < numProps; i++) {
          let px = Math.random() * w;
          const ph = 10 + Math.random() * 15;
          const pw = 6 + Math.random() * 6;
          ctx.fillStyle = colors.line;
          ctx.fillRect(px, groundY - ph, pw, ph);
          if (Math.random() > 0.5) {
            ctx.fillRect(px - 3, groundY - ph + 5, 3, 4);
            ctx.fillRect(px - 3, groundY - ph + 2, 1, 3);
          }
        }

        // Entities (1-6)
        const entityCount = 1 + Math.floor(Math.random() * 6);
        const types = ["human", "dog", "cat", "chicken", "bird"];

        let positions = [];
        // First entity in hero zone
        positions.push({
          x: w * 0.2,
          type: types[Math.floor(Math.random() * types.length)]
        });

        for (let i = 1; i < entityCount; i++) {
          positions.push({
            x: Math.random() * (w - 40) + 20,
            type: types[Math.floor(Math.random() * types.length)]
          });
        }

        // UFOs
        const ufoCount = 1 + Math.floor(Math.random() * 2);
        for (let i = 0; i < ufoCount; i++) {
          drawUFO(
            ctx,
            Math.random() * w,
            Math.random() * (h * 0.3),
            colors.line
          );
        }

        positions.forEach((ent, i) => {
          const isFirst = i === 0;
          const color = isFirst ? colors.accent : colors.line;
          drawPixelEntity(ctx, ent.x, groundY, color, ent.type);
        });
      }

      function drawUFO(ctx, x, y, color) {
        ctx.fillStyle = color;
        const size = 3;
        ctx.fillRect(x + 2 * size, y, 4 * size, 2 * size);
        ctx.fillRect(x, y + 2 * size, 8 * size, 2 * size);
        ctx.clearRect(x + 1 * size, y + 3 * size, size, size / 2);
        ctx.clearRect(x + 3 * size, y + 3 * size, size, size / 2);
        ctx.clearRect(x + 6 * size, y + 3 * size, size, size / 2);
      }

      function drawPixelEntity(ctx, x, y, color, type) {
        const size = 3;
        ctx.fillStyle = color;
        ctx.strokeStyle = color;
        ctx.lineWidth = size;
        ctx.lineCap = "round";
        ctx.lineJoin = "round";

        // Helper rect
        const r = (dx, dy, w, h) =>
          ctx.fillRect(x + dx * size, y - dy * size, w * size, h * size);

        if (type === "human") {
          // Stick Figure
          const pose = Math.floor(Math.random() * 3); // 0=Stand, 1=Run, 2=Run
          const facingRight = Math.random() > 0.5;
          const dir = facingRight ? 1 : -1;

          const headCx = x + 2.5 * size;
          const headCy = y - 11 * size;
          const neckY = headCy + 1.5 * size;
          const hipY = y - 5 * size;

          // 1. Head (Circle)
          ctx.beginPath();
          ctx.arc(headCx, headCy, 1.5 * size, 0, Math.PI * 2);
          ctx.fill();

          // 2. Body (Line)
          ctx.beginPath();
          // If running, lean body forward
          const lean = pose > 0 ? dir * 2 * size : 0;
          ctx.moveTo(headCx + lean, neckY);
          ctx.lineTo(headCx, hipY);
          ctx.stroke();

          const shoulderX = headCx + lean;
          const shoulderY = neckY + 1 * size;

          // 3. Limbs (Polylines)
          if (pose === 0) {
            // Standing
            // Legs together (Single line or close)
            ctx.beginPath();
            ctx.moveTo(headCx, hipY);
            ctx.lineTo(headCx, y);
            ctx.stroke();

            // Arms: One pointing
            ctx.beginPath();
            if (Math.random() > 0.5) {
              // Right arm points right
              ctx.moveTo(shoulderX, shoulderY);
              ctx.lineTo(shoulderX + 6 * size, shoulderY);
              // Left arm down
              ctx.moveTo(shoulderX, shoulderY);
              ctx.lineTo(shoulderX - 2 * size, y - 8 * size);
            } else {
              // Left arm points left
              ctx.moveTo(shoulderX, shoulderY);
              ctx.lineTo(shoulderX - 6 * size, shoulderY);
              // Right arm down
              ctx.moveTo(shoulderX, shoulderY);
              ctx.lineTo(shoulderX + 2 * size, y - 8 * size);
            }
            ctx.stroke();
          } else {
            // Running (Pose 1 or 2)
            // Legs Bent & Wide
            ctx.beginPath();
            // Back leg
            ctx.moveTo(headCx, hipY);
            ctx.lineTo(headCx - dir * 3 * size, hipY + 2 * size); // Knee back/up
            ctx.lineTo(headCx - dir * 4 * size, y - 2 * size); // Foot back
            // Front leg
            ctx.moveTo(headCx, hipY);
            ctx.lineTo(headCx + dir * 2 * size, hipY + 1 * size); // Knee fwd
            ctx.lineTo(headCx + dir * 2 * size, y); // Foot ground
            ctx.stroke();

            // Arms Swinging
            ctx.beginPath();
            // Front Arm Up
            ctx.moveTo(shoulderX, shoulderY);
            ctx.lineTo(shoulderX + dir * 3 * size, shoulderY - 2 * size); // Elbow
            ctx.lineTo(shoulderX + dir * 4 * size, shoulderY - 4 * size); // Hand
            // Back Arm Down
            ctx.moveTo(shoulderX, shoulderY);
            ctx.lineTo(shoulderX - dir * 2 * size, shoulderY + 2 * size);
            ctx.lineTo(shoulderX - dir * 4 * size, shoulderY);
            ctx.stroke();
          }
        } else if (type === "dog") {
          r(0, 6, 3, 3);
          r(0, 8, 1, 2);
          r(2, 6, 6, 3);
          r(7, 7, 1, 2);
          r(2, 3, 1, 3);
          r(6, 3, 1, 3);
        } else if (type === "cat") {
          r(0, 6, 3, 3);
          r(0, 8, 1, 2);
          r(2, 8, 1, 2);
          r(2, 5, 5, 3);
          r(6, 6, 1, 4);
          r(2, 2, 1, 2);
          r(5, 2, 1, 2);
        } else if (type === "chicken") {
          r(0, 4, 2, 2);
          r(1, 4, 1, 1);
          r(0, 3, 3, 2);
          r(1, 1, 1, 1);
        } else if (type === "bird") {
          const flyY = y - 40 - Math.random() * 20;
          ctx.fillRect(x, flyY, 4 * size, 1 * size);
          ctx.fillRect(x + 1 * size, flyY - 1 * size, 1 * size, 3 * size);
          ctx.fillRect(x + 3 * size, flyY, 1 * size, 1 * size);
        }

        ctx.beginPath(); // Reset path
      }

      function drawRetroWeather(ctx, w, h, weather, colors) {
        ctx.fillStyle = colors.line;

        if (weather === "sunny") {
          const sunX = w - 50;
          const sunY = 40;
          ctx.fillStyle = colors.accent;
          ctx.fillRect(sunX, sunY, 12, 12);

          // Rays detached (gap of 3px)
          const gap = 4;
          ctx.fillRect(sunX + 5, sunY - 6 - gap, 2, 3);
          ctx.fillRect(sunX + 5, sunY + 15 + gap, 2, 3);
          ctx.fillRect(sunX - 6 - gap, sunY + 5, 3, 2);
          ctx.fillRect(sunX + 15 + gap, sunY + 5, 3, 2);

          // Diagonals detached
          const diagGap = 3;
          ctx.fillRect(sunX - 3 - diagGap, sunY - 3 - diagGap, 2, 2);
          ctx.fillRect(sunX + 13 + diagGap, sunY - 3 - diagGap, 2, 2);
          ctx.fillRect(sunX - 3 - diagGap, sunY + 13 + diagGap, 2, 2);
          ctx.fillRect(sunX + 13 + diagGap, sunY + 13 + diagGap, 2, 2);
        }

        if (weather === "rainy") {
          ctx.fillStyle = colors.line;
          for (let i = 0; i < 40; i++) {
            const rx = Math.random() * w;
            const ry = Math.random() * h;
            ctx.fillRect(rx, ry, 1, 6);
          }
        }

        if (weather === "snowy") {
          // Use line color for snow in light mode so it's visible, or accent if needed.
          // But usually snow is white. If bg is light, white is invisible.
          // Let's use a light grey or the line color with opacity?
          // Actually user requested "white snow" before, but then "canvas drawing not good".
          // Let's use 'colors.line' but small dots for contrast, or stick to white if dark mode.
          const isDark = colors.bg === "#202124" || colors.bg === "#111";
          ctx.fillStyle = isDark ? "#fff" : "#ccc";
          for (let i = 0; i < 60; i++) {
            const sx = Math.random() * w;
            const sy = Math.random() * h;
            ctx.fillRect(sx, sy, 2, 2);
          }
        }

        if (weather === "cloudy") {
          const cloudCount = 6;
          ctx.fillStyle = colors.line;
          ctx.globalAlpha = 0.2;
          for (let i = 0; i < cloudCount; i++) {
            let cx = Math.random() * w;
            let cy = Math.random() * (h / 2);
            let cw = 30 + Math.random() * 20;
            ctx.fillRect(cx, cy, cw, 10);
            ctx.fillRect(cx + 10, cy - 8, cw - 15, 8);
            ctx.fillRect(cx + 5, cy + 5, cw - 10, 5);
          }
          ctx.globalAlpha = 1.0;
        }

        if (weather === "overcast") {
          ctx.fillStyle = colors.line;
          ctx.globalAlpha = 0.4;
          // Increased lines to 32 (Doubled from 16)
          for (let i = 0; i < 32; i++) {
            const ly = 10 + Math.random() * (h * 0.3);
            const lx = Math.random() * w;
            const lw = 20 + Math.random() * 60;
            ctx.fillRect(lx, ly, lw, 2);
          }
          ctx.globalAlpha = 1.0;
        }

        if (weather === "lightning") {
          ctx.strokeStyle = colors.accent;
          ctx.lineWidth = 2;
          ctx.beginPath();
          let lx = Math.random() * w;
          let ly = 0;
          ctx.moveTo(lx, ly);
          while (ly < h - 20) {
            lx += (Math.random() - 0.5) * 30;
            ly += 20;
            ctx.lineTo(lx, ly);
          }
          ctx.stroke();
        }

        if (weather === "foggy") {
          ctx.fillStyle = colors.line;
          ctx.globalAlpha = 0.1;
          for (let x = 0; x < w; x += 4) {
            ctx.fillRect(x, 0, 1, h);
          }
          ctx.globalAlpha = 1.0;
        }
      }

      window.onload = function () {
        applyTheme();
      };

      if (document.readyState === "complete") {
        applyTheme();
      }
    </script>
  </body>
</html>
